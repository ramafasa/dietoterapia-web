---
interface Props {
  name: string;
  text: string;
  context?: string;
  image?: string | null;
}

const { name, text, context, image } = Astro.props;

// Generate initials from name (first letter of first and last name)
const getInitials = (fullName: string): string => {
  const names = fullName.trim().split(' ');
  if (names.length === 0) return '??';
  if (names.length === 1) return names[0].charAt(0).toUpperCase();
  return (names[0].charAt(0) + names[names.length - 1].charAt(0)).toUpperCase();
};

const initials = getInitials(name);
---

<article class="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 flex flex-col space-y-4">
  <!-- Avatar -->
  <div class="flex items-start space-x-4">
    {image ? (
      <img
        src={image}
        alt={`ZdjÄ™cie ${name}`}
        class="w-16 h-16 rounded-full object-cover flex-shrink-0"
      />
    ) : (
      <div class="w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center flex-shrink-0">
        <span class="font-heading text-2xl font-bold">{initials}</span>
      </div>
    )}

    <div class="flex-1 min-w-0">
      <h3 class="font-heading font-semibold text-lg text-neutral-dark">
        {name}
      </h3>
      {context && (
        <p class="font-body text-sm text-primary italic">
          {context}
        </p>
      )}
    </div>
  </div>

  <!-- Testimonial Text -->
  <blockquote class="font-body text-base text-neutral-dark leading-relaxed">
    "{text}"
  </blockquote>
</article>

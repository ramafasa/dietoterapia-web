---
import Layout from '@/layouts/Layout.astro';
import WeightHistoryView from '@/components/waga/WeightHistoryView';

const user = Astro.locals.user;

// Auth middleware already handles user check and role verification
if (!user) {
  return Astro.redirect('/logowanie');
}

if (user.role !== 'patient') {
  return Astro.redirect('/dietetyk/pacjenci');
}

const firstName = user.firstName || 'Pacjencie';
---

<Layout title="Historia PomiarÃ³w - Paulina Maciak Dietetyka Kliniczna">
  <WeightHistoryView firstName={firstName} client:load />
</Layout>

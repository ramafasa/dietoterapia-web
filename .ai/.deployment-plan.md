# Plan wdrożenia: Dietoterapia na paulinamaciak.pl

**Data utworzenia**: 2025-10-20
**Status**: Do realizacji
**Cel**: Wdrożenie aplikacji Astro na domenę paulinamaciak.pl z hostingiem na Vercel

---

## Faza 1: Przygotowanie aplikacji do wdrożenia

### Krok 1: Weryfikacja konfiguracji projektu
- [X] Sprawdź `astro.config.mjs` - upewnij się, że `site: 'https://paulinamaciak.pl'` jest ustawione
- [X] Sprawdź `output: 'server'` + `adapter: vercel()` w konfiguracji Astro (wymagane dla API endpoints)
- [X] Dodano `export const prerender = true` do wszystkich stron (strony statyczne, tylko API server-side)
- [X] Zweryfikuj, że wszystkie ścieżki do obrazów są poprawne (relatywne, nie absolutne)

### Krok 2: Konfiguracja zmiennych środowiskowych
- [X] `.env.production` nie jest potrzebny lokalnie - zmienne będą dodane w Vercel Dashboard
- [X] Zweryfikowano `.gitignore` - pliki `.env*` są ignorowane ✅

### Krok 3: Build lokalny i weryfikacja
```bash
npm run build
```
- [X] Sprawdź, czy build przechodzi bez błędów ✅
- [X] Zweryfikuj rozmiar bundle'a: **~280 KB total JS** (w granicach normy dla React islands)
  - Największy plik: `client.BfPWZUkF.js` (186 KB) - React runtime
  - Komponenty: ContactForm (6 KB), ConsultationForm (9 KB), CookieBanner (4 KB)
  - **Uwaga**: Więcej niż założone 25 KB, ale to nadal 90% mniej niż full React app (~2-3 MB)
- [X] Preview lokalny: Nie dostępny z Vercel adapter (normalne), testowanie na Vercel po deploy
- [X] Build info:
  - 6 stron pre-rendered (statyczne HTML)
  - 27 obrazów zoptymalizowanych (WebP format)
  - Sitemap wygenerowany
  - 2 API endpoints jako Vercel Serverless Functions

---

## Faza 2: Deployment na Vercel

### Krok 4: Utworzenie konta i projektu na Vercel
- [X] Wejdź na [vercel.com](https://vercel.com)
- [X] Zaloguj się przez GitHub (zalecane) lub utwórz konto
- [X] Kliknij "Add New Project"
- [ ] Zaimportuj repozytorium `dietoterapia-web` z GitHub

### Krok 5: Konfiguracja projektu w Vercel
- [X] **Framework Preset**: Vercel powinien automatycznie wykryć Astro
- [X] **Build Command**: `npm run build` (domyślne)
- [X] **Output Directory**: `dist` (domyślne dla Astro)
- [X] **Install Command**: `npm install` (domyślne)

### Krok 6: Dodanie zmiennych środowiskowych w Vercel
W ustawieniach projektu → Environment Variables dodaj:
- [X] `SMTP_HOST` = `ssl0.ovh.net`
- [X] `SMTP_PORT` = `465`
- [X] `SMTP_USER` = `dietoterapia@paulinamaciak.pl`
- [X] `SMTP_PASS` = `<twoje_hasło_smtp>`
- [X] `CONTACT_EMAIL` = `dietoterapia@paulinamaciak.pl`
- [X] `SITE_URL` = `https://paulinamaciak.pl`

**Uwaga**: Ustaw zmienne dla środowiska "Production"

### Krok 7: Deploy aplikacji
- [X] Kliknij "Deploy"
- [X] Poczekaj na zakończenie builda (powinien zająć 30-60 sekund)
- [X] Vercel automatycznie przydzieli URL tymczasowy: `https://dietoterapia-web.vercel.app`
- [X] Przetestuj aplikację na tymczasowym URL

---

## Faza 3: Konfiguracja domeny paulinamaciak.pl

### Krok 8: Dodanie domeny w Vercel
- [X] W Vercel → Settings → Domains
- [X] Dodaj domenę: `paulinamaciak.pl`
- [X] Dodaj również: `www.paulinamaciak.pl` (redirect do głównej domeny)
- [X] Vercel wyświetli instrukcje konfiguracji DNS

**Vercel poda dwa typy rekordów do konfiguracji:**
- **A Record** dla `paulinamaciak.pl` → `76.76.21.21` (przykładowy IP Vercel)
- **CNAME Record** dla `www` → `cname.vercel-dns.com`

### Krok 9: Konfiguracja DNS w OVH
- [X] Zaloguj się do panelu OVH: [ovh.com/manager](https://www.ovh.com/manager/)
- [X] Wybierz domenę `paulinamaciak.pl`
- [X] Przejdź do zakładki "Strefa DNS" (DNS Zone)

**Usuń stare rekordy (jeśli istnieją):**
- [X] Usuń stare rekordy A dla `@` (root domain)
- [X] Usuń stare rekordy CNAME dla `www`

**Dodaj nowe rekordy DNS:**
- [X] **A Record**:
  - Subdomena: `@` (oznacza root domain)
  - Cel: IP podane przez Vercel (np. `76.76.21.21`)
  - TTL: 3600 (1 godzina)

- [X] **CNAME Record dla www**:
  - Subdomena: `www`
  - Cel: `cname.vercel-dns.com` (lub URL podany przez Vercel)
  - TTL: 3600

### Krok 10: Weryfikacja propagacji DNS
- [X] Poczekaj 5-30 minut na propagację DNS (może zająć do 24h, ale zazwyczaj szybciej)
- [X] Sprawdź propagację DNS:
  - Użyj narzędzia: [whatsmydns.net](https://www.whatsmydns.net/)
  - Wpisz `paulinamaciak.pl` i sprawdź rekordy A
  - Wpisz `www.paulinamaciak.pl` i sprawdź rekordy CNAME

### Krok 11: Weryfikacja domeny w Vercel
- [ ] Wróć do Vercel → Settings → Domains
- [ ] Vercel automatycznie wykryje poprawną konfigurację DNS
- [ ] Status domeny powinien zmienić się na "Valid"

---

## Faza 4: SSL/HTTPS (automatyczne przez Vercel)

### Krok 12: Weryfikacja certyfikatu SSL
- [ ] Vercel automatycznie generuje certyfikat SSL (Let's Encrypt)
- [ ] Proces trwa 1-5 minut po weryfikacji DNS
- [ ] Sprawdź status w Vercel → Settings → Domains → "Certificate"
- [ ] Certyfikat powinien mieć status "Valid"

---

## Faza 5: Testy produkcyjne

### Krok 13: Testy funkcjonalne
- [ ] Otwórz `https://paulinamaciak.pl` w przeglądarce
- [ ] Sprawdź, czy wszystkie strony działają:
  - `/` (Home)
  - `/o-mnie` (O mnie)
  - `/konsultacje` (Konsultacje)
- [ ] Przetestuj formularze:
  - Formularz konsultacji (`/konsultacje`)
  - Sprawdź, czy email dociera do `dietoterapia@paulinamaciak.pl`
  - Sprawdź walidację pól
  - Sprawdź komunikaty toast
- [ ] Sprawdź redirect z `www.paulinamaciak.pl` na `paulinamaciak.pl`

### Krok 14: Testy wydajności
- [ ] Uruchom Lighthouse test (DevTools → Lighthouse → "Mobile")
- [ ] Sprawdź wyniki:
  - **Performance**: > 90 (cel: 98-100)
  - **SEO**: > 90 (cel: 100)
  - **Accessibility**: > 90 (cel: 100)
  - **Best Practices**: > 90

### Krok 15: Testy responsywności
- [ ] Sprawdź na mobile (DevTools → Toggle device toolbar)
- [ ] Sprawdź na tablecie
- [ ] Sprawdź na desktopie
- [ ] Przetestuj w różnych przeglądarkach:
  - Chrome/Edge
  - Firefox
  - Safari (jeśli masz Mac/iPhone)

### Krok 16: Testy SEO
- [ ] Sprawdź meta tags (View → Developer → View Source):
  - `<title>` tag
  - `<meta name="description">`
  - Open Graph tags (`og:title`, `og:description`, `og:image`)
- [ ] Sprawdź `robots.txt`: `https://paulinamaciak.pl/robots.txt`
- [ ] Sprawdź sitemap (jeśli skonfigurowany): `https://paulinamaciak.pl/sitemap.xml`

---

## Faza 6: Monitoring i optymalizacja

### Krok 17: Konfiguracja monitoringu
- [ ] Dodaj Google Analytics (jeśli wymagane)
- [ ] Dodaj Google Search Console:
  - Zweryfikuj własność domeny
  - Wyślij sitemap
- [ ] Skonfiguruj Vercel Analytics (opcjonalnie, darmowe)

### Krok 18: Automatyczne deploymenty
Vercel automatycznie deployuje przy każdym push do `main`:
- [ ] Sprawdź ustawienia w Vercel → Settings → Git
- [ ] **Production Branch**: `main`
- [ ] **Preview branches**: włączone (każdy branch dostaje preview URL)

---

## Faza 7: Dokumentacja i backup

### Krok 19: Dokumentacja wdrożenia
- [ ] Zapisz dane dostępowe do OVH (bezpiecznie)
- [ ] Zapisz dane dostępowe do Vercel
- [ ] Zapisz hasło SMTP
- [ ] Udokumentuj konfigurację DNS

### Krok 20: Plan rollbacku
W razie problemów:
- [ ] Vercel pozwala cofnąć deployment do poprzedniej wersji (Deployments → ... → Rollback)
- [ ] Możesz tymczasowo zmienić rekordy DNS z powrotem na stary serwer (jeśli istniał)

---

## Podsumowanie kosztów

### Hosting (Vercel Free Tier):
- ✅ 100 GB bandwidth/miesiąc
- ✅ Unlimited builds
- ✅ Automatic SSL
- ✅ Custom domain
- ✅ **Koszt: 0 zł/miesiąc**

### Domena (OVH):
- Już opłacona
- Odnowienie: ~50-80 zł/rok

### Email (OVH MX Plan):
- Jeśli masz skonfigurowane konto email na OVH
- Koszt zależny od planu OVH

**TOTAL: 0 zł/miesiąc (tylko domena ~5-7 zł/miesiąc przy odnowieniu)**

---

## Szacowany czas wdrożenia

- **Faza 1-2** (Przygotowanie + Deploy na Vercel): **30-45 minut**
- **Faza 3** (Konfiguracja DNS): **15-30 minut** + czas propagacji DNS (5-60 min)
- **Faza 4** (SSL): **Automatyczne** (5-10 minut)
- **Faza 5-6** (Testy + monitoring): **30-60 minut**

**TOTAL: 2-3 godziny** (włączając oczekiwanie na DNS)

---

## Notatki

### Ważne linki:
- Vercel Dashboard: https://vercel.com/dashboard
- OVH Manager: https://www.ovh.com/manager/
- DNS Checker: https://www.whatsmydns.net/
- Lighthouse: Chrome DevTools → Lighthouse

### Troubleshooting:

**Problem: DNS nie propaguje się**
- Rozwiązanie: Poczekaj dłużej (do 24h), sprawdź poprawność rekordów w OVH

**Problem: SSL nie działa**
- Rozwiązanie: Sprawdź, czy DNS jest poprawnie skonfigurowany, poczekaj 10-15 minut

**Problem: Formularz nie wysyła emaili**
- Rozwiązanie: Sprawdź zmienne środowiskowe w Vercel, przetestuj dane SMTP

**Problem: Build failuje na Vercel**
- Rozwiązanie: Sprawdź logi buildu, upewnij się że `npm run build` działa lokalnie

---

**Plan przygotowany**: 2025-10-20
**Autor**: Claude Code
**Status**: Gotowy do realizacji